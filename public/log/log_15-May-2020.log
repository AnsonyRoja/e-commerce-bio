this is my log message
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN det_sub_categories dsc ON p.id=dsc.products_id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN det_sub_categories dsc ON dsc.products_id=p.id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id  WHERE (p.status='A' AND p.qty_avaliable>0) AND sc.categories_id='27' GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
this is my log message
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN det_sub_categories dsc ON p.id=dsc.products_id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN det_sub_categories dsc ON dsc.products_id=p.id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id  WHERE (p.status='A' AND p.qty_avaliable>0) AND sc.categories_id='27' GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN (SELECT p.id, p.name, ts_rank_cd(to_tsvector(description_short), query) AS rank
       FROM products p, to_tsquery('PLUMROSE | JAMON | COCIDO | CHEESE | TRIS | SOLOMO | ABIERTO | MOLIDO | SAMBA | FRESA | MAIZAL | CARAOTAS | NEGRAS | JUANA | HARINA | MAIZ | BLCA | KELLOGG | CHOCOZUCARITAS | MAVESA | MARGARINA | FRUTY | CAKE | CREMA | AVELLANA | HUEVOS | CARTON | COCA-COLA | MENOS | CALORIAS | KIERO | SALSA | TOMATE | KETCHUP | KELVIN | BRIDGE | WHISKY | SCOTCH | BLENDE | FRUTOS | TROZOS | ATUN | ACEITE | SCHOCO | BARRA | CHOCOLATE | CARAMELO | MINALBA | AGUA | NATURALYST | PEPPERONI | GOURMET | NATURALYS') query
       WHERE query @@ to_tsvector(description_short)
       ORDER BY rank DESC
       LIMIT 20) as r ON r.id=p.id  WHERE (p.status='A' AND p.qty_avaliable>0)  GROUP BY p.id ORDER BY RANDOM() LIMIT 100
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN det_sub_categories dsc ON dsc.products_id=p.id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id  WHERE (p.status='A' AND p.qty_avaliable>0) AND sc.categories_id='27' GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN det_sub_categories dsc ON dsc.products_id=p.id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id  WHERE (p.status='A' AND p.qty_avaliable>0) AND sc.categories_id='27' GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A'   WHERE (p.status='A' AND p.qty_avaliable>0)  GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A'   WHERE (p.status='A' AND p.qty_avaliable>0)  GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN (SELECT p.id, p.name, ts_rank_cd(to_tsvector(description_short), query) AS rank
       FROM products p, to_tsquery('PLUMROSE | JAMON | COCIDO | CHEESE | TRIS | SOLOMO | ABIERTO | MOLIDO | SAMBA | FRESA | MAIZAL | CARAOTAS | NEGRAS | JUANA | HARINA | MAIZ | BLCA | KELLOGG | CHOCOZUCARITAS | MAVESA | MARGARINA | FRUTY | CAKE | CREMA | AVELLANA | HUEVOS | CARTON | COCA-COLA | MENOS | CALORIAS | KIERO | SALSA | TOMATE | KETCHUP | KELVIN | BRIDGE | WHISKY | SCOTCH | BLENDE | FRUTOS | TROZOS | ATUN | ACEITE | SCHOCO | BARRA | CHOCOLATE | CARAMELO | MINALBA | AGUA | NATURALYST | PEPPERONI | GOURMET | NATURALYS') query
       WHERE query @@ to_tsvector(description_short)
       ORDER BY rank DESC
       LIMIT 20) as r ON r.id=p.id  WHERE (p.status='A' AND p.qty_avaliable>0)  GROUP BY p.id ORDER BY RANDOM() LIMIT 100
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN det_sub_categories dsc ON dsc.products_id=p.id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id  WHERE (p.status='A' AND p.qty_avaliable>0) AND sc.categories_id='27' GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN det_sub_categories dsc ON dsc.products_id=p.id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id  WHERE (p.status='A' AND p.qty_avaliable>0) AND sc.categories_id='27' GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A'   WHERE (p.status='A' AND p.qty_avaliable>0)  GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A'   WHERE (p.status='A' AND p.qty_avaliable>0)  GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN (SELECT p.id, p.name, ts_rank_cd(to_tsvector(description_short), query) AS rank
       FROM products p, to_tsquery('PLUMROSE | JAMON | COCIDO | CHEESE | TRIS | SOLOMO | ABIERTO | MOLIDO | SAMBA | FRESA | MAIZAL | CARAOTAS | NEGRAS | JUANA | HARINA | MAIZ | BLCA | KELLOGG | CHOCOZUCARITAS | MAVESA | MARGARINA | FRUTY | CAKE | CREMA | AVELLANA | HUEVOS | CARTON | COCA-COLA | MENOS | CALORIAS | KIERO | SALSA | TOMATE | KETCHUP | KELVIN | BRIDGE | WHISKY | SCOTCH | BLENDE | FRUTOS | TROZOS | ATUN | ACEITE | SCHOCO | BARRA | CHOCOLATE | CARAMELO | MINALBA | AGUA | NATURALYST | PEPPERONI | GOURMET | NATURALYS') query
       WHERE query @@ to_tsvector(description_short)
       ORDER BY rank DESC
       LIMIT 20) as r ON r.id=p.id  WHERE (p.status='A' AND p.qty_avaliable>0)  GROUP BY p.id ORDER BY RANDOM() LIMIT 100
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN det_sub_categories dsc ON p.id=dsc.products_id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id  WHERE (p.status='A' AND p.qty_avaliable>0) AND sc.categories_id='27' GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN det_sub_categories dsc ON p.id=dsc.products_id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id  WHERE (p.status='A' AND p.qty_avaliable>0) AND sc.categories_id='27' GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN det_sub_categories dsc ON p.id=dsc.products_id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id  WHERE (p.status='A' AND p.qty_avaliable>0) AND sc.categories_id='27' GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
SELECT * FROM (SELECT json_agg(
        json_build_object(
    's', sc.id,
    'c',c.id,
    'm',c.adulto
) 
) json_subcategories, p.keyword,p.qty_sold,p.peso,p.qty_avaliable,p.qty_max,p.description_short,coalesce(SUM(t.value),0.000000) total_impuesto,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price) total_precio, p.name,p.photo as image, p.id, p.price,(SELECT rating FROM rating_products WHERE users_id='16' AND products_id=p.id) as calificado_por_mi, ROUND(p.user_rating) as rating,coalesce(((p.price*SUM(t.value)/100)+p.price),p.price)/(SELECT rate FROM coins WHERE id=1) as total_precio_dolar FROM products p INNER JOIN det_sub_categories dsc ON p.id=dsc.products_id INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id INNER JOIN categories c ON c.id=sc.categories_id LEFT JOIN det_product_taxes dpt ON dpt.products_id=p.id  LEFT JOIN taxes t ON t.id=dpt.taxes_id and t.status='A' INNER JOIN sub_categories sc ON sc.id=dsc.sub_categories_id  WHERE (p.status='A' AND p.qty_avaliable>0) AND sc.categories_id='27' GROUP BY p.id ORDER BY p.id DESC LIMIT 100) as consulta  ORDER BY id DESC
